@model CoronelExpress.Models.Product

@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = "Búsqueda de Productos";
}

<!-- Tipografías, Bootstrap y Framer Motion -->
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/framer-motion/10.11.3/framer-motion.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

<style>
    body {
        background: linear-gradient(135deg, #e0f7fa, #80deea);
        font-family: 'Poppins', sans-serif;
        margin: 0;
        padding: 0;
        overflow-x: hidden;
        transition: background 0.5s ease, color 0.5s ease;
    }
        /* Tema oscuro */
        body.dark-mode {
            background: #121212;
            color: #e0e0e0;
        }

    .search-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 90vh;
        text-align: center;
        padding: 20px;
    }

    .search-title {
        font-family: 'Playfair Display', serif;
        font-size: 3rem;
        font-weight: 700;
        color: #064f52;
        margin-bottom: 30px;
        animation: fadeInDown 1s ease-in-out;
        text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.15);
    }

    /* Botón de Temas (3cm bajo el encabezado) */
    .theme-toggle-container {
        margin-top: 3cm;
    }

    .btn-theme {
        font-family: 'Poppins', sans-serif;
        font-size: 1.3rem;
        padding: 10px 20px;
        border-radius: 50px;
        color: #fff;
        background: linear-gradient(45deg, #42e695, #3bb2b8);
        border: none;
        cursor: pointer;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

        .btn-theme:hover {
            transform: scale(1.1);
            box-shadow: 0 0 25px rgba(66, 230, 149, 0.6);
        }

    .product-card {
        width: 420px;
        background: #ffffff;
        border-radius: 20px;
        box-shadow: 0px 15px 40px rgba(0, 0, 0, 0.2);
        padding: 25px 25px 60px;
        text-align: center;
        transition: transform 0.4s ease, box-shadow 0.4s ease;
        perspective: 1000px;
        transform-style: preserve-3d;
        position: relative;
        overflow: hidden;
        z-index: 0;
        animation: fadeInUp 1s ease-in-out;
    }

        .product-card::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, rgba(255,255,255,0.1), rgba(0,0,0,0.05));
            transform: rotate(25deg);
            pointer-events: none;
            z-index: -1;
        }

        .product-card:hover {
            transform: scale(1.05) rotateY(5deg);
            box-shadow: 0px 20px 50px rgba(0, 0, 0, 0.3);
        }

    .product-img {
        width: 100%;
        height: 260px;
        object-fit: cover;
        border-radius: 15px;
        transition: transform 0.4s ease, filter 0.3s ease;
    }

    .product-card:hover .product-img {
        transform: scale(1.1);
        filter: brightness(1.1);
    }

    h2 {
        font-family: 'Playfair Display', serif;
        font-size: 2rem;
        color: #064f52;
        margin-top: 20px;
        margin-bottom: 10px;
    }

    p {
        font-size: 1.1rem;
        color: #333;
        margin-bottom: 10px;
    }

    .price {
        font-size: 1.9rem;
        color: #00796b;
        font-weight: 600;
        margin-bottom: 15px;
    }

    .action-buttons {
        margin-top: 20px;
        display: flex;
        justify-content: center;
        gap: 15px;
        flex-wrap: wrap;
        padding-bottom: 20px;
    }

    .btn-action {
        font-family: 'Poppins', sans-serif;
        font-size: 1.3rem;
        padding: 12px 24px;
        border-radius: 50px;
        color: #fff;
        background: linear-gradient(45deg, #42e695, #3bb2b8);
        border: none;
        cursor: pointer;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        text-decoration: none;
    }

        .btn-action:hover {
            transform: scale(1.1) rotate(-2deg);
            box-shadow: 0 0 25px rgba(66, 230, 149, 0.6);
        }

    .btn-cancel {
        background: linear-gradient(45deg, #f2545b, #ff6b6b);
    }

    @@keyframes fadeInDown {
        from

    {
        opacity: 0;
        transform: translateY(-20px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }

    }

    @@keyframes fadeInUp {
        from

    {
        opacity: 0;
        transform: translateY(20px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }

    }
    /* Preloader avanzado */
    #preloader {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #e0f7fa, #80deea);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 9999;
    }

    .preloader-circle {
        width: 80px;
        height: 80px;
        border: 8px solid rgba(66, 230, 149, 0.3);
        border-top-color: #42e695;
        border-radius: 50%;
    }
</style>

<!-- Preloader avanzado -->
<div id="preloader">
    <div class="preloader-circle"></div>
</div>

<div class="search-container">
    @if (Model != null)
    {
        <h1 class="search-title">🔎 Producto Encontrado</h1>
        <!-- Botón de Temas ubicado 3cm debajo del título -->
        <div class="theme-toggle-container">
            <button id="btnTheme" class="btn-theme" aria-label="Cambiar tema">Cambiar Tema</button>
        </div>
        <div class="product-card" role="region" aria-label="Detalle del producto">
            <img src="@Model.ImageUrl" class="product-img" alt="@Model.Name">
            <h2>@Model.Name</h2>
            @if (!string.IsNullOrEmpty(Model.Description))
            {
                <p>@Model.Description</p>
            }
            <p class="price">💲 @Model.Price.ToString("C")</p>
            <p>📦 Stock Disponible: @Model.Stock</p>
            <div class="action-buttons">
                <a asp-controller="Cart" asp-action="Add" asp-route-id="@Model.Id" class="btn-action" role="button" aria-label="Agregar al Carrito">
                    Agregar al Carrito
                </a>
                <a asp-controller="Home" asp-action="Index" class="btn-action btn-cancel" role="button" aria-label="Cancelar Búsqueda">
                    Cancelar Búsqueda
                </a>
            </div>
        </div>
    }
    else
    {
        <h1 class="search-title">❌ Producto No Encontrado</h1>
        <p>Lo sentimos, no pudimos encontrar el producto que buscas.</p>
        <a asp-controller="Home" asp-action="Index" class="btn-action btn-cancel" role="button" aria-label="Volver al Inicio">Volver al Inicio</a>
    }
</div>

<script>
    // Animación del preloader con GSAP
    window.addEventListener('load', () => {
        gsap.to("#preloader", {
            duration: 1,
            opacity: 0,
            scale: 0.8,
            ease: "power3.out",
            onComplete: () => {
                document.getElementById("preloader").style.display = "none";
            }
        });
    });

    // Toggle de tema (modo oscuro/claro)
    const btnTheme = document.getElementById("btnTheme");
    btnTheme.addEventListener("click", () => {
        document.body.classList.toggle("dark-mode");
        btnTheme.textContent = document.body.classList.contains("dark-mode") ? "Tema Claro" : "Tema Oscuro";
        localStorage.setItem("theme", document.body.classList.contains("dark-mode") ? "dark" : "light");
    });

    // Persistencia del tema
    if (localStorage.getItem("theme") === "dark") {
        document.body.classList.add("dark-mode");
        btnTheme.textContent = "Tema Claro";
    }
</script>
